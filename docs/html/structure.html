<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Structure - Mero Jugx Documentation</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>ğŸ“ Project Structure</h1>
            <p>Complete project structure and architecture explanation</p>
        </div>
    </header>

    <nav class="container">
        <a href="index.html">Home</a>
        <a href="developer-guide.html">Developer Guide</a>
        <a href="user-guide.html">User Guide</a>
        <a href="organization-guide.html">Organization Guide</a>
        <a href="admin-guide.html">Admin Guide</a>
    </nav>

    <div class="container">
        <div class="content">
            <h1>Mero Jugx Project Structure</h1>
            <p>This document explains the complete structure of the Mero Jugx project, including all directories, modules, and their purposes.</p>

            <h2>Root Directory Structure</h2>
            <pre><code>mero-jugx/
â”œâ”€â”€ src/                    # Backend source code
â”‚   â”œâ”€â”€ auth/              # Authentication module
â”‚   â”œâ”€â”€ users/             # User management module
â”‚   â”œâ”€â”€ organizations/     # Organization management module
â”‚   â”œâ”€â”€ roles/             # Role and permission management
â”‚   â”œâ”€â”€ packages/          # Package and subscription management
â”‚   â”œâ”€â”€ payments/          # Payment processing
â”‚   â”œâ”€â”€ chat/              # Real-time chat and calls
â”‚   â”œâ”€â”€ notifications/     # Notification system
â”‚   â”œâ”€â”€ invitations/       # User invitations
â”‚   â”œâ”€â”€ mfa/               # Multi-factor authentication
â”‚   â”œâ”€â”€ audit-logs/        # Activity logging
â”‚   â”œâ”€â”€ analytics/         # Analytics and reporting
â”‚   â”œâ”€â”€ search/            # Search functionality
â”‚   â”œâ”€â”€ monitoring/        # System monitoring
â”‚   â”œâ”€â”€ billing/           # Billing management
â”‚   â”œâ”€â”€ permissions/       # Permission management
â”‚   â”œâ”€â”€ integrations/      # Third-party integrations
â”‚   â”œâ”€â”€ communication/     # Email, SMS, Push notifications
â”‚   â”œâ”€â”€ data-management/   # Data import/export
â”‚   â”œâ”€â”€ database/          # Database entities, migrations, seeds
â”‚   â”œâ”€â”€ common/            # Shared utilities, guards, decorators
â”‚   â”œâ”€â”€ config/            # Configuration files
â”‚   â””â”€â”€ health/            # Health checks
â”œâ”€â”€ frontend/              # Frontend React application
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # Reusable React components
â”‚   â”‚   â”œâ”€â”€ pages/         # Page components
â”‚   â”‚   â”œâ”€â”€ services/      # API service layer
â”‚   â”‚   â”œâ”€â”€ store/         # State management (Zustand)
â”‚   â”‚   â”œâ”€â”€ hooks/         # Custom React hooks
â”‚   â”‚   â”œâ”€â”€ layouts/       # Layout components
â”‚   â”‚   â””â”€â”€ utils/         # Utility functions
â”‚   â””â”€â”€ public/            # Static assets
â”œâ”€â”€ docs/                  # Documentation
â”‚   â””â”€â”€ html/              # HTML documentation (served from app)
â”œâ”€â”€ scripts/               # Setup and utility scripts
â”œâ”€â”€ test/                  # E2E tests
â””â”€â”€ api/                   # Postman collections</code></pre>

            <h2>Backend Module Structure</h2>
            <p>Each backend module follows a consistent structure:</p>
            <pre><code>module-name/
â”œâ”€â”€ module-name.controller.ts    # API endpoints
â”œâ”€â”€ module-name.service.ts       # Business logic
â”œâ”€â”€ module-name.module.ts        # Module configuration
â”œâ”€â”€ dto/                         # Data Transfer Objects
â”‚   â””â”€â”€ *.dto.ts
â””â”€â”€ guards/                      # Module-specific guards (if any)</code></pre>

            <h2>Module Details</h2>

            <h3>Authentication Module (`src/auth/`)</h3>
            <p><strong>Purpose:</strong> Handles user authentication, registration, login, JWT tokens, email verification, password reset, and MFA.</p>
            <p><strong>Key Files:</strong></p>
            <ul>
                <li><code>auth.controller.ts</code> - Authentication endpoints</li>
                <li><code>auth.service.ts</code> - Authentication business logic</li>
                <li><code>guards/</code> - JWT and local auth guards</li>
                <li><code>strategies/</code> - Passport strategies (JWT, Local)</li>
                <li><code>dto/</code> - DTOs for login, register, password reset, etc.</li>
            </ul>

            <h3>Users Module (`src/users/`)</h3>
            <p><strong>Purpose:</strong> User profile management, user listing, user updates, password changes, user data export (GDPR).</p>
            <p><strong>Key Files:</strong></p>
            <ul>
                <li><code>users.controller.ts</code> - User management endpoints</li>
                <li><code>users.service.ts</code> - User business logic</li>
                <li><code>dto/</code> - User DTOs</li>
            </ul>

            <h3>Organizations Module (`src/organizations/`)</h3>
            <p><strong>Purpose:</strong> Organization management, settings, branding, statistics, organization switching, document management.</p>
            <p><strong>Key Files:</strong></p>
            <ul>
                <li><code>organizations.controller.ts</code> - Organization endpoints</li>
                <li><code>documents.controller.ts</code> - Document management endpoints</li>
                <li><code>organizations.service.ts</code> - Organization business logic</li>
                <li><code>documents.service.ts</code> - Document management logic</li>
                <li><code>organization-branding.service.ts</code> - Branding customization</li>
            </ul>

            <h3>Roles Module (`src/roles/`)</h3>
            <p><strong>Purpose:</strong> Role management, permissions, role templates, user role assignments.</p>
            <p><strong>Key Files:</strong></p>
            <ul>
                <li><code>roles.controller.ts</code> - Role CRUD operations</li>
                <li><code>user-roles.controller.ts</code> - User role assignments</li>
                <li><code>role-templates.controller.ts</code> - Role template management</li>
                <li><code>roles.service.ts</code> - Role business logic</li>
            </ul>

            <h3>Chat Module (`src/chat/`)</h3>
            <p><strong>Purpose:</strong> Real-time chat, messaging, group chats, WebRTC calls, message history.</p>
            <p><strong>Key Files:</strong></p>
            <ul>
                <li><code>chat.controller.ts</code> - Chat endpoints</li>
                <li><code>call.controller.ts</code> - Voice/video call endpoints</li>
                <li><code>chat.gateway.ts</code> - WebSocket gateway for real-time communication</li>
                <li><code>chat.service.ts</code> - Chat business logic</li>
                <li><code>call.service.ts</code> - Call management logic</li>
            </ul>

            <h3>Notifications Module (`src/notifications/`)</h3>
            <p><strong>Purpose:</strong> User notifications, notification preferences, unread counts, notification history.</p>

            <h3>Payments Module (`src/payments/`)</h3>
            <p><strong>Purpose:</strong> Payment processing, Stripe integration, eSewa integration, payment verification.</p>
            <p><strong>Key Files:</strong></p>
            <ul>
                <li><code>payments.controller.ts</code> - Payment endpoints</li>
                <li><code>stripe.service.ts</code> - Stripe integration</li>
                <li><code>esewa.service.ts</code> - eSewa integration</li>
            </ul>

            <h3>Packages Module (`src/packages/`)</h3>
            <p><strong>Purpose:</strong> Package/subscription management, feature access control, package upgrades/downgrades.</p>

            <h3>MFA Module (`src/mfa/`)</h3>
            <p><strong>Purpose:</strong> Multi-factor authentication setup, verification, backup codes.</p>

            <h3>Invitations Module (`src/invitations/`)</h3>
            <p><strong>Purpose:</strong> User invitations to organizations, invitation acceptance, invitation management.</p>

            <h3>Audit Logs Module (`src/audit-logs/`)</h3>
            <p><strong>Purpose:</strong> Activity logging, audit trail, compliance tracking.</p>

            <h3>Common Module (`src/common/`)</h3>
            <p><strong>Purpose:</strong> Shared utilities, guards, decorators, filters, interceptors used across modules.</p>
            <p><strong>Key Directories:</strong></p>
            <ul>
                <li><code>decorators/</code> - Custom decorators (@CurrentUser, @Permissions, etc.)</li>
                <li><code>guards/</code> - Shared guards (PermissionsGuard, etc.)</li>
                <li><code>filters/</code> - Exception filters</li>
                <li><code>interceptors/</code> - Response interceptors</li>
                <li><code>services/</code> - Shared services (Email, File, etc.)</li>
                <li><code>utils/</code> - Utility functions</li>
            </ul>

            <h3>Database Module (`src/database/`)</h3>
            <p><strong>Purpose:</strong> Database configuration, entities, migrations, seeds.</p>
            <p><strong>Key Directories:</strong></p>
            <ul>
                <li><code>entities/</code> - TypeORM entities (User, Organization, etc.)</li>
                <li><code>migrations/</code> - Database migrations</li>
                <li><code>seeds/</code> - Database seeders</li>
            </ul>

            <h2>Frontend Structure</h2>
            <pre><code>frontend/src/
â”œâ”€â”€ components/         # Reusable React components
â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ pages/             # Page components
â”‚   â”œâ”€â”€ auth/          # Authentication pages
â”‚   â”œâ”€â”€ dashboard/     # Dashboard pages
â”‚   â”œâ”€â”€ organizations/ # Organization pages
â”‚   â”œâ”€â”€ chat/          # Chat pages
â”‚   â””â”€â”€ ...
â”œâ”€â”€ services/          # API service layer
â”‚   â”œâ”€â”€ api.ts         # Axios instance
â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”œâ”€â”€ users.service.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ store/             # State management (Zustand)
â”‚   â”œâ”€â”€ authStore.ts
â”‚   â”œâ”€â”€ userStore.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ hooks/             # Custom React hooks
â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â””â”€â”€ useWebSocket.ts
â”œâ”€â”€ layouts/           # Layout components
â”‚   â”œâ”€â”€ MainLayout.tsx
â”‚   â””â”€â”€ AuthLayout.tsx
â””â”€â”€ utils/             # Utility functions
    â”œâ”€â”€ constants.ts
    â””â”€â”€ helpers.ts</code></pre>

            <h2>Database Entities</h2>
            <p>Key entities in <code>src/database/entities/</code>:</p>
            <ul>
                <li><strong>User</strong> - User accounts</li>
                <li><strong>Organization</strong> - Organizations</li>
                <li><strong>OrganizationMember</strong> - User-organization relationships</li>
                <li><strong>Role</strong> - Roles</li>
                <li><strong>Permission</strong> - Permissions</li>
                <li><strong>Package</strong> - Subscription packages</li>
                <li><strong>Payment</strong> - Payment records</li>
                <li><strong>Chat</strong> - Chat rooms</li>
                <li><strong>Message</strong> - Chat messages</li>
                <li><strong>Notification</strong> - User notifications</li>
                <li><strong>Document</strong> - Organization documents</li>
                <li><strong>AuditLog</strong> - Activity logs</li>
            </ul>

            <h2>Configuration Files</h2>
            <ul>
                <li><code>package.json</code> - NPM dependencies and scripts</li>
                <li><code>tsconfig.json</code> - TypeScript configuration</li>
                <li><code>nest-cli.json</code> - NestJS CLI configuration</li>
                <li><code>.env</code> - Environment variables (not in repo)</li>
                <li><code>docker-compose.yml</code> - Docker configuration</li>
                <li><code>Dockerfile</code> - Docker image definition</li>
            </ul>

            <h2>Scripts Directory</h2>
            <p>Cross-platform scripts in <code>scripts/</code>:</p>
            <ul>
                <li><code>setup-github.sh/.ps1</code> - Automated setup</li>
                <li><code>setup-manual.sh/.ps1</code> - Interactive setup</li>
                <li><code>start-dev.sh/.ps1</code> - Start development servers</li>
                <li><code>start-prod.sh/.ps1</code> - Start production server</li>
                <li><code>reset-enhanced.sh/.ps1</code> - Reset project</li>
                <li><code>test-system.sh/.ps1</code> - Run tests</li>
                <li><code>ci-cd.sh/.ps1</code> - CI/CD pipeline</li>
            </ul>

            <h2>Architecture Patterns</h2>

            <h3>Module Pattern</h3>
            <p>Each feature is a self-contained module with:</p>
            <ul>
                <li>Controller (HTTP endpoints)</li>
                <li>Service (Business logic)</li>
                <li>Module (Dependency injection configuration)</li>
                <li>DTOs (Data validation)</li>
            </ul>

            <h3>Dependency Injection</h3>
            <p>NestJS uses dependency injection for loose coupling. Services are injected via constructors.</p>

            <h3>Guards & Decorators</h3>
            <p>Custom decorators and guards handle:</p>
            <ul>
                <li>Authentication (@UseGuards(JwtAuthGuard))</li>
                <li>Authorization (@Permissions('resource.action'))</li>
                <li>Current user/organization (@CurrentUser(), @CurrentOrganization())</li>
            </ul>

            <h3>Database Layer</h3>
            <p>TypeORM is used for:</p>
            <ul>
                <li>Entity definitions</li>
                <li>Repository pattern</li>
                <li>Migrations</li>
                <li>Relationships</li>
            </ul>

            <div class="info">
                <strong>Note:</strong> For detailed API documentation and usage examples, see the <a href="developer-guide.html">Developer Guide</a>.
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 Mero Jugx - Blendwit Tech. All rights reserved.</p>
        <p>Documentation Version 1.0.0</p>
    </footer>
</body>
</html>

